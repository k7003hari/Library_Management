import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class MemberService {
  private addUrl = 'http://localhost:9090/members/regMember';
  private viewUrl = 'http://localhost:9090/members/getallMember';
  private searchUrl = 'http://localhost:9090/members/';
  private updateUrl = 'http://localhost:9090/members/update/';
  private deleteUrl = 'http://localhost:9090/members/delete/';

  constructor(private http: HttpClient) {}

  addMember(member: any): Observable<any> {
    return this.http.post(this.addUrl, member);
  }

  getAllMembers(): Observable<any> {
    return this.http.get(this.viewUrl);
  }

  getMemberById(id: number): Observable<any> {
    return this.http.get(this.searchUrl + id);
  }

  updateMember(id: number, member: any): Observable<any> {
    return this.http.put(this.updateUrl + id, member);
  }

  deleteMember(id: number): Observable<any> {
    return this.http.delete(this.deleteUrl + id);
  }
}
 

import { Component } from '@angular/core';
import { MemberService } from '../member.service';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { ActivatedRoute, RouterLink, Router } from '@angular/router';
import { NavbarComponent } from '../navbar/navbar.component';

@Component({
  selector: 'app-member-add',  
  imports: [RouterLink,FormsModule,CommonModule,NavbarComponent],
  templateUrl: './member-add.component.html',  
  styleUrls: ['./member-add.component.css']
})
export class MemberAddComponent {
  member = {
    name: '',
    email: '',
    phone: '',
    address: '',
    membershipStatus: ''
  };

  constructor(private memberService: MemberService,private route: ActivatedRoute, private router: Router,) {}

  addMember() {
    this.memberService.addMember(this.member).subscribe({
      next: (res) => {
        alert('Member added successfully!');
        console.log('Add Member Response:', res);
        this.clearForm();
      },
      error: (err) => {
        alert('Failed to add member!');
        console.error('Add Member Error:', err);
      }
    });
    this.router.navigate(['/member'])
  }

  clearForm() {
    this.member = {
      name: '',
      email: '',
      phone: '',
      address: '',
      membershipStatus: ''
    };
  }
}

<app-navbar></app-navbar>



<div class="container " style="margin-top: 150px;" >
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      <h3 class="mb-0">Add New Member</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="addMember()" #addForm="ngForm" novalidate>
        <div class="mb-3">
          <label for="name" class="form-label">Name</label>
          <input
            type="text"
            id="name"
            class="form-control"
            name="name"
[(ngModel)]="member.name"
            required
          />
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input
            type="email"
            id="email"
            class="form-control"
            name="email"
[(ngModel)]="member.email"
            required
          />
        </div>

        <div class="mb-3">
          <label for="phone" class="form-label">Phone</label>
          <input
            type="text"
            id="phone"
            class="form-control"
            name="phone"
            [(ngModel)]="member.phone"
            required
          />
        </div>

        <div class="mb-3">
          <label for="address" class="form-label">Address</label>
          <input
            type="text"
            id="address"
            class="form-control"
            name="address"
            [(ngModel)]="member.address"
            required
          />
        </div>

        <div class="mb-3">
          <label for="membershipStatus" class="form-label">Membership Status</label>
          <input
            type="text"
            id="membershipStatus"
            class="form-control"
            name="membershipStatus"
            [(ngModel)]="member.membershipStatus"
            required
          />
        </div>

        <button
          type="submit"
          class="btn btn-success w-100"
          [disabled]="addForm.invalid"
        >
          Add Member
        </button>
      </form>
    </div>
  </div>
</div>

